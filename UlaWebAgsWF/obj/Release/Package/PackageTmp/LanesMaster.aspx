<%@ Page Title="Lane Master" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="LanesMaster.aspx.cs" Inherits="UlaWebAgsWF.LanesMaster" %>
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
    <script type="text/javascript">
        $(document).ready(function () {
            $('#<%= CerateNewLaneLink.ClientID %>').click(function (e) {
                e.preventDefault();
                $('#<%= CreateNewLaneContainer.ClientID %>').toggle("slow", "swing");
            });
        });
    </script>
    <div class="container">
        <div class="page-header">
            <h2>Lanes</h2>
        </div>
        <asp:Panel ID="SuccessMsg" runat="server" Visible="false" CssClass="alert alert-success alert-dismissible">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
            <asp:Label ID="SuccessMsgText" runat="server" Text="" />
        </asp:Panel>
        <asp:Panel ID="FailureMsg" runat="server" Visible="false" CssClass="alert alert-danger alert-dismissible">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
            <asp:Label ID="FailureMsgText" runat="server" Text="" />
        </asp:Panel>
        <asp:Panel ID="CreateNewLaneLinkContainer" CssClass="text-left" runat="server">
            <asp:LinkButton ID="CerateNewLaneLink" style="padding: 0px;" CssClass="btn btn-link" Text="Create lane" runat="server" />
        </asp:Panel>
        <asp:Panel ID="CreateNewLaneContainer" runat="server" style="display:none;">
            <form class="form-inline">
                <div class="form-group">
                    <label for="NewLaneName">Lane Name:</label>
                    <asp:TextBox ID="NewLaneName" runat="server" CssClass="form-control" />
                    <asp:RequiredFieldValidator ID="RequiredFieldNewLaneName" ControlToValidate="NewLaneName" CssClass="alert alert-danger validator-field" runat="server" ErrorMessage="Please enter Lane Name" Display="Dynamic"></asp:RequiredFieldValidator>
                </div>
                <div class="form-group">
                    <label for="LaneSystemIP">System IP:</label>
                    <asp:TextBox ID="LaneSystemIP" runat="server" CssClass="form-control" />
                    <asp:RequiredFieldValidator ID="RequiredFieldLaneSystemIP" ControlToValidate="LaneSystemIP" CssClass="alert alert-danger validator-field" runat="server" ErrorMessage="Please enter System IP address"></asp:RequiredFieldValidator>
                </div>
                <asp:Button ID="NewLaneBtnSubmit" UseSubmitBehavior="false" runat="server" CssClass="btn btn-default" Text="Add Lane" OnClick="NewLaneBtnSubmit_Click" />
            </form>
        </asp:Panel>
        <br clear="all" />
        <asp:GridView ID="LanesDGV" AutoGenerateColumns="false" AutoGenerateEditButton="false" AutoGenerateDeleteButton="false" OnRowEditing="LanesDGV_RowEditing" OnRowUpdating="LanesDGV_RowUpdating" OnRowUpdated="LanesDGV_RowUpdated" OnRowDeleting="LanesDGV_RowDeleting" OnRowCancelingEdit="LanesDGV_RowCancelingEdit" OnRowDeleted="LanesDGV_RowDeleted" CssClass="table table-hover text-center" DataKeyNames="LaneID" runat="server" >
            <Columns>
                <asp:TemplateField HeaderText="Lane Name" HeaderStyle-CssClass="text-center" SortExpression="LaneName">
                    <ItemTemplate>
                        <asp:Label ID="LaneNameTxt" runat="server" Text='<%# Bind("LaneName") %>' />
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="LaneNameTBX" runat="server" CssClass="form-control" Text='<%# Bind("LaneName") %>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Lane System IP" HeaderStyle-CssClass="text-center" SortExpression="SystemIPAddress">
                    <ItemTemplate>
                        <asp:Label ID="LaneSystemIPText" runat="server" Text='<%# Bind("SystemIP") %>' />
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="LaneSystemIPTBX" runat="server" CssClass="form-control" Text='<%# Bind("SystemIP") %>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:CommandField CausesValidation="false" ShowEditButton="true" ShowDeleteButton="true" DeleteText="Delete" EditText="Edit" />
            </Columns>
        </asp:GridView>  
    </div>
</asp:Content>
